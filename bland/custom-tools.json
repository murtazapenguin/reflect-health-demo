{
  "_instructions": "These tool definitions are used in the Bland AI Conversational Pathway. Replace YOUR_BACKEND_URL with your actual backend URL (e.g., https://abc123.ngrok.io). Add these as Webhook nodes in the pathway builder or as custom tools.",

  "tools": [
    {
      "name": "AuthenticateProvider",
      "description": "Validates a provider's NPI number against the Reflect Health provider directory. Call this after the provider gives their NPI.",
      "url": "YOUR_BACKEND_URL/api/v1/voice/authenticate-npi",
      "method": "POST",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "npi": "{{input.npi}}"
      },
      "input_schema": {
        "example": {
          "speech": "Let me verify that NPI for you, one moment.",
          "npi": "1234567890"
        },
        "type": "object",
        "properties": {
          "speech": "string - what to say while the tool runs",
          "npi": "string - the 10-digit NPI number"
        }
      },
      "response": {
        "valid": "$.valid",
        "provider_name": "$.provider_name",
        "practice_name": "$.practice_name",
        "fax_number": "$.fax_number"
      }
    },
    {
      "name": "VerifyZipCode",
      "description": "Verifies the provider's zip code matches the NPI record. Call this after the provider confirms their zip code.",
      "url": "YOUR_BACKEND_URL/api/v1/voice/verify-zip",
      "method": "POST",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "npi": "{{input.npi}}",
        "zip_code": "{{input.zip_code}}"
      },
      "input_schema": {
        "example": {
          "speech": "Let me verify that, one moment.",
          "npi": "1234567890",
          "zip_code": "90210"
        },
        "type": "object",
        "properties": {
          "speech": "string",
          "npi": "string - the NPI from the previous step",
          "zip_code": "string - the 5-digit zip code"
        }
      },
      "response": {
        "verified": "$.verified",
        "provider_name": "$.provider_name"
      }
    },
    {
      "name": "LookupEligibility",
      "description": "Looks up a patient's eligibility/coverage information and service-specific benefits. Call this after collecting the patient name, date of birth, and the service they are checking coverage for.",
      "url": "YOUR_BACKEND_URL/api/v1/voice/eligibility",
      "method": "POST",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "npi": "{{input.npi}}",
        "patient_name": "{{input.patient_name}}",
        "patient_dob": "{{input.patient_dob}}",
        "member_id": "{{input.member_id}}",
        "service_type": "{{input.service_type}}"
      },
      "input_schema": {
        "example": {
          "speech": "Let me look that up for you.",
          "npi": "1234567890",
          "patient_name": "John Smith",
          "patient_dob": "1982-03-04",
          "member_id": "",
          "service_type": "MRI"
        },
        "type": "object",
        "properties": {
          "speech": "string",
          "npi": "string - the authenticated provider's NPI",
          "patient_name": "string - patient's first and last name",
          "patient_dob": "YYYY-MM-DD - patient's date of birth",
          "member_id": "string - optional member ID if name lookup failed",
          "service_type": "string - the medical service or procedure to check coverage for (e.g., MRI, physical therapy, lab work)"
        }
      },
      "response": {
        "found": "$.found - boolean, whether the patient was found in the system",
        "message": "$.message - string, error or informational message if lookup had issues (null on success)",
        "status": "$.status - string, the patient's coverage status: 'active', 'inactive', or 'termed'",
        "member_id": "$.member_id - string, the patient's member ID (e.g., MBR-001234)",
        "patient_name": "$.patient_name - string, the patient's full name as stored in the system",
        "plan_name": "$.plan_name - string, the insurance plan name (e.g., Reflect Gold PPO)",
        "effective_date": "$.effective_date - string, coverage start date in YYYY-MM-DD format",
        "term_date": "$.term_date - string, coverage termination date if applicable (null if still active)",
        "copay_primary": "$.copay_primary - integer, dollar amount copay for primary care visits",
        "copay_specialist": "$.copay_specialist - integer, dollar amount copay for specialist visits",
        "deductible": "$.deductible - integer, total annual deductible amount in dollars",
        "deductible_met": "$.deductible_met - integer, how much of the deductible has been met so far in dollars",
        "cob_status": "$.cob_status - string, coordination of benefits status (e.g., 'primary')",
        "out_of_pocket_max": "$.out_of_pocket_max - integer, annual out-of-pocket maximum in dollars",
        "out_of_pocket_met": "$.out_of_pocket_met - integer, how much of the out-of-pocket max has been met in dollars",
        "service_type": "$.service_type - string, the display name of the service that was looked up (e.g., 'MRI', 'Physical Therapy'). Null if no service was requested.",
        "service_covered": "$.service_covered - boolean, whether the specific service is covered under the patient's plan. True = covered, false = not covered, null = service not recognized.",
        "service_copay": "$.service_copay - integer, flat dollar copay for this specific service (null if coinsurance applies instead or service not covered)",
        "service_coinsurance": "$.service_coinsurance - integer, percentage the patient pays for this service (e.g., 20 means 20%). Null if flat copay applies instead.",
        "service_prior_auth": "$.service_prior_auth - boolean, whether prior authorization is required for this service",
        "service_visit_limit": "$.service_visit_limit - string, any visit limits for this service (e.g., '40 visits/year', 'Unlimited'). Null if no limit.",
        "service_notes": "$.service_notes - string, additional notes about coverage for this service (e.g., 'Waived if admitted', 'PCP referral required', 'Not covered under HMO plan'). Null if none."
      }
    },
    {
      "name": "LookupClaim",
      "description": "Looks up a claim by claim number or by patient + date of service. Call this after collecting claim information.",
      "url": "YOUR_BACKEND_URL/api/v1/voice/claims",
      "method": "POST",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "npi": "{{input.npi}}",
        "claim_number": "{{input.claim_number}}",
        "patient_name": "{{input.patient_name}}",
        "patient_dob": "{{input.patient_dob}}",
        "date_of_service": "{{input.date_of_service}}"
      },
      "input_schema": {
        "example": {
          "speech": "One moment while I look that up.",
          "npi": "1234567890",
          "claim_number": "CLM-00481922",
          "patient_name": "John Smith",
          "patient_dob": "1982-03-04",
          "date_of_service": ""
        },
        "type": "object",
        "properties": {
          "speech": "string",
          "npi": "string - the authenticated provider's NPI",
          "claim_number": "string - the claim number (e.g. CLM-00481922)",
          "patient_name": "string - patient name if no claim number",
          "patient_dob": "YYYY-MM-DD - patient DOB",
          "date_of_service": "YYYY-MM-DD - date of service if no claim number"
        }
      },
      "response": {
        "found": "$.found",
        "claim_number": "$.claim_number",
        "status": "$.status",
        "date_of_service": "$.date_of_service",
        "procedure_code": "$.procedure_code",
        "procedure_desc": "$.procedure_desc",
        "billed_amount": "$.billed_amount",
        "allowed_amount": "$.allowed_amount",
        "paid_amount": "$.paid_amount",
        "patient_responsibility": "$.patient_responsibility",
        "check_number": "$.check_number",
        "process_date": "$.process_date",
        "received_date": "$.received_date",
        "denial_code": "$.denial_code",
        "denial_reason": "$.denial_reason",
        "appeal_deadline": "$.appeal_deadline"
      }
    }
  ]
}
